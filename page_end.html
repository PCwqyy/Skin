<!--Mouse Effect-->
<div id="Dots' Home"></div>
<span id="Cursor"></span>
<script>
var MouseX,MouseY;
var WholePage=document.querySelector('body');
var Home=document.getElementById("Dots' Home");
var DotcntShow=document.getElementById("Dots' Home");
var Cursor=document.getElementById("Cursor");

document.addEventListener('mousemove',function(e){
	MouseX=e.pageX,MouseY=e.pageY;
});
document.addEventListener('click',function()
	{
		var Round=document.createElement('span');
		Round.id='BigDot';
		Round.style.left=MouseX+'px';
		Round.style.top=MouseY+'px';
		WholePage.appendChild(Round);
		setTimeout(()=>{Round.remove()},500);
	});
var dotCnt=0;
document.addEventListener('mousemove',function()
	{
		if(dotCnt>100)	return;
		dotCnt++;
		var dot=document.createElement('span');
		dot.id='SmallDot';
		dot.style.left=MouseX+'px';
		dot.style.top=MouseY+'px';
		Cursor.style.left=MouseX+'px';
		Cursor.style.top=MouseY+'px';
		Home.appendChild(dot);
		setTimeout(()=>{dot.remove();dotCnt--;},900);
	});
</script>

<!--Special User Comment-->
<script>
var AllComment=document.getElementsByClassName("feedbackListSubtitle");
var YourComment;
var renderd=false;

setTimeout(function()
	{
		if(renderd)	return;
		for(i=0;i<AllComment.length;i++)
			for(j=0;j<AllComment[i].children.length;j++)
			{
				if(AllComment[i].children[j].textContent=="PCwqyy")
					AllComment[i].children[j].style.animation="PCwqyy 2s linear infinite";
				if(AllComment[i].children[j].textContent=="haozexu")
					AllComment[i].children[j].style.animation="haozexu 60s linear infinite",
					AllComment[i].children[j].style.display="inline-flex",
					AllComment[i].children[j].style.fontFamily="Playball";
			}
		YourComment=document.getElementById("divCommentShow");
		YourComment.textContent="Your new comment will be here";

		renderd=true;
	},1000);


</script>

<script>
/** @param {HTMLCollectionOf<HTMLTableCellElement>} tars */
function NeoTable(tars)
{
	/** @type {Element}*/
	var now,res;
	/** @type {Array<Element>} */
	var DelList=new Array();
	for(i=0;i<tars.length;i++)
	{
		now=tars[i];
		res=now.textContent.search('(\\[(X|O|V)\\])');
		if(res!=-1)
		{
			switch(now.textContent[res+1])
			{
				case 'X':now.classList.add('NoTable');break;
				case 'O':now.classList.add('HalfTable');break;
				case 'V':now.classList.add('YesTable');break;
			}
			now.innerHTML=now.innerHTML.substring(res+3);
		}
		res=now.textContent.match('(\\[D\\])');
		if(res!=null)
		{
			now.innerHTML=now.innerHTML.substring(res[0].length);
			DelList.push(now);
		}

		res=now.textContent.match('\\{cs=([0-9]+)\\}');
		if(res!=null)
		{
			now.setAttribute('colspan',res[1]);
			now.innerHTML=now.innerHTML.substring(res[0].length);
			Ex=now;
			for(var j=1;j<Number(res[1]);j++)
			{
				Ex=Ex.nextElementSibling;
				DelList.push(Ex);
			}
		}
		res=now.textContent.match('\\{rs=([0-9]+)\\}');
		if(res!=null)
		{
			now.setAttribute('rowspan',res[1]);
			now.innerHTML=now.innerHTML.substring(res[0].length);
		}
		res=now.textContent.match('\\{SL\\}');
		if(res!=null)
		{
			now.classList.add('StickLeft');
			now.innerHTML=now.innerHTML.substring(res[0].length);
		}

		if(now.innerHTML=='')
		{
			if(now.classList.contains('YesTable'))
				now.innerHTML=('<img class="ImgNeo" src="https://images.cnblogs.com/cnblogs_com/blogs/766141/galleries/2264367/o_250228030719_Tick.svg">');
			if(now.classList.contains('HalfTable'))
				now.innerHTML=('<img class="ImgNeo" src="https://images.cnblogs.com/cnblogs_com/blogs/766141/galleries/2264367/o_250228030719_Circle.svg">');
			if(now.classList.contains('NoTable'))
				now.innerHTML=('<img class="ImgNeo" src="https://images.cnblogs.com/cnblogs_com/blogs/766141/galleries/2264367/o_250228030719_Cross.svg">');
		}
	}
	for(i in DelList)
		DelList[i].remove();
}
			
var AllTds=document.getElementsByTagName('td');
var AllThs=document.getElementsByTagName('th');
NeoTable(AllThs);
NeoTable(AllTds);
</script>

<!--Mermaid fix-->
<script>
var MermaidMargin=10;
window.onload=function(){
	var MermaidStuffs=jQuery(".mermaid>svg>g");
	for(i of MermaidStuffs)
	{
		var r=i.getBBox();
		i.parentElement.setAttribute("viewBox",
			`${-MermaidMargin} ${-MermaidMargin} ${r.width+MermaidMargin} ${r.height+MermaidMargin}`);
	}
}
</script>

<!--SysTree-->
<script>
/** @type {String} */
var TreeWork;
/**
 *  @param {String} type 
 *  @returns {String} */
function GetTreeHTML(type)
{
	// console.log(`[Now]${TreeWork}`);
	var res=TreeWork.match(/^\s*([^\(|,|\)]*)\s*\(/);
	if(res==undefined)
	{
		res=TreeWork.match(/^\s*([^\(|,|\)]+)\s*/);
		TreeWork=TreeWork.substring(res[0].length);
		// console.log(`[Ret]${TreeWork}`);
		return `
			<table class="SysTreeTable LeafTable"><tr>
				<td class="SysTree ${type=="DTree"?"LineD":"LineH"}"></td>
				<td class="SysTree Leaf" rowspan="2">
					<span class="SysTreeText">${res[1]}</span>
				</td>
			</tr><tr>
				<td class="SysTree ${type=="UTree"?"LineU":"Empty"}"></td>
			</tr></table>`;
	}
	var Parent=res[1];
	TreeWork=TreeWork.substring(res[0].length);
	// console.log(`[Then]${TreeWork}`);
	var Child1=GetTreeHTML("UTree");
	res=TreeWork.match(/^\s*,\s*/);
	TreeWork=TreeWork.substring(res[0].length);
	// console.log(`[-,]${TreeWork}`);
	var Child2=GetTreeHTML("DTree");
	res=TreeWork.match(/^\s*\)\s*/);
	TreeWork=TreeWork.substring(res[0].length);
	// console.log(`[-)]${TreeWork}`);
	return `
		<table class="SysTreeTable"><tr>
			<td class="SysTree P ${type=="DTree"?"LineD":"LineH"}">
				<span class="SysTreeText">${Parent}</span>
			</td>
			<td class="SysTree C1">${Child1}</td>
		</tr><tr>
			<td class="SysTree ${type=="UTree"?"LineU":"Empty"}"></td>
			<td class="SysTree C2">${Child2}</td>
		</tr></table>`;
}

/** @param {HTMLCollectionOf<HTMLDivElement>} eles */
function MakeTree(eles)
{
	for(var i=0;i<eles.length;i++)
	{
		var res=eles[i].textContent.match(/^\s*\|\|\|([^\|]+?)\|\|\|/m);
		if(res==null)	continue;
		TreeWork=res[1];
		eles[i].innerHTML=GetTreeHTML("Root");
		eles[i].classList.add("SysTreeWrapper");
	}
}

var Paragraphs=document.getElementsByTagName("p");
MakeTree(Paragraphs);
</script>

<!--The End Poem-->
<script>
var str="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyzΔΘΓΠΛΞΣΨϡΦΩϜαβγδεζθικλμνξοπρςτυφχψωσϠϝ";
function generateMixed(n) {
	var res="";
	for(var i=0;i<n;i++)
	{
		var id=Math.ceil(Math.random()*99);
		res+=str[id];
	}
	return res;
}
var PN=document.getElementsByClassName("playername");
var SC=document.getElementsByClassName("scrambled");
var PNI=document.getElementById("pnInput");
for(var i=0;i<PN.length;i++)
		PN[i].textContent=PNI.value;
setInterval(()=>{
	for(var i=0;i<SC.length;i++)
		SC[i].textContent=generateMixed(4);
},10);
PNI.addEventListener("input",()=>{
	for(var i=0;i<PN.length;i++)
		PN[i].textContent=PNI.value;
});
</script>	